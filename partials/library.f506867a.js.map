{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0BAGMC,EAAY,IAAI,E,WAAAC,SAEhBC,EAAcC,SAASC,cAAc,iBACrCC,EAAeF,SAASC,cAAc,oBACtCE,EAAYH,SAASC,cAAc,qB,SAwC1BG,I,OAAAA,EAAfC,EAAAV,EAAA,CAAAU,EAAAC,GAAAC,MAAA,SAAAC,EAA0BC,G,IAClBC,E,kEAAAA,EAASC,SAASF,GAAMG,IAAIC,EAAAC,YAAYC,KAAK,IACnDhB,EAAYiB,UAAYN,E,4CAFDO,MAAAC,KAAAC,U,CAtCzBhB,EAAUiB,iBAAiB,UAE3B,SAAwBC,GACtBxB,EAAUyB,MAAQnB,EAAUoB,aAAaC,OACzCH,EAAEI,iBACFvB,EAAawB,UAAUC,OAAO,WAEN,KAApB9B,EAAUyB,OACZzB,EACG+B,oBACAC,MAAK,SAAAC,GACJ,GAAIA,EAAMC,QAAQC,OAAS,EAMzB,OALA9B,EAAawB,UAAUC,OAAO,gBAE9BM,YAAW,WACT/B,EAAawB,UAAUQ,IAAI,U,GAC1B,KAGDJ,EAAMC,QAAQC,OAAS,IACzB9B,EAAawB,UAAUQ,IAAI,WAgBnCnC,EAAYiB,UAAY,G,SAEAP,GAAXL,EAAUa,MAAAC,KAAAC,U,CAdfgB,CAAWL,EAAMC,SASzB5B,EAAUa,UAAY,G,IAJjBoB,OAAM,SAAAC,G,OAAOC,QAAQD,E","sources":["src/js-blocks/input-search.js"],"sourcesContent":["import { renderCard } from './card-draw';\nimport ApiMovies from './fetch';\n\nconst apiMovies = new ApiMovies();\n\nconst galleryList = document.querySelector('.gallery-list');\nconst errorMessage = document.querySelector('.warning-message');\nconst formInput = document.querySelector('.js-search__input');\n\nformInput.addEventListener('submit', onSearchMovies);\n\nfunction onSearchMovies(e) {\n  apiMovies.query = formInput.ariaValueMax.trim();\n  e.preventDefault();\n  errorMessage.classList.remove('.hidden');\n\n  if (apiMovies.query !== '') {\n    apiMovies\n      .searchMovieByName()\n      .then(films => {\n        if (films.results.length < 1) {\n          errorMessage.classList.remove('.hidden');\n\n          setTimeout(() => {\n            errorMessage.classList.add('.hidden');\n          }, 3000);\n          return;\n        }\n        if (films.results.length > 1) {\n          errorMessage.classList.add('.hidden');\n\n          clearMovieCardContainer();\n\n          cardMarkup(films.results);\n\n          clearInput();\n        }\n      })\n      .catch(err => console(err));\n  }\n}\nfunction clearInput() {\n  formInput.innerHTML = '';\n}\nfunction clearMovieCardContainer() {\n  galleryList.innerHTML = '';\n}\nasync function cardMarkup(data) {\n  const markup = cardList(data).map(renderCard).join('');\n  galleryList.innerHTML = markup;\n}\n"],"names":["$bpxeT","parcelRequire","$a8bc02203734895c$var$apiMovies","default","$a8bc02203734895c$var$galleryList","document","querySelector","$a8bc02203734895c$var$errorMessage","$a8bc02203734895c$var$formInput","$a8bc02203734895c$var$_cardMarkup","$parcel$interopDefault","$2TvXO","mark","_callee","data","markup","cardList","map","$5TdHc","renderCard","join","innerHTML","apply","this","arguments","addEventListener","e","query","ariaValueMax","trim","preventDefault","classList","remove","searchMovieByName","then","films","results","length","setTimeout","add","$a8bc02203734895c$var$cardMarkup","catch","err","console"],"version":3,"file":"library.f506867a.js.map"}